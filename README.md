# 随机学英语 - Chrome扩展

一个智能的中文词组翻译Chrome扩展，支持多种翻译服务和自定义翻译比例。

## 功能特性

### 核心功能
- **智能分词翻译**：自动检测页面中的中文词组并进行翻译
- **多种翻译格式**：支持方括号、圆括号、冒号等多种显示格式
- **翻译比例控制**：可以设置翻译的词组比例（20%-100%）
- **多种翻译服务**：支持Google、有道云、阿里云翻译

### 翻译比例功能
新增的翻译比例功能允许用户控制翻译的词组数量：
- **100%**：翻译所有中文词组（默认）
- **80%**：翻译80%的中文词组
- **60%**：翻译60%的中文词组
- **50%**：翻译50%的中文词组
- **40%**：翻译40%的中文词组
- **30%**：翻译30%的中文词组
- **20%**：翻译20%的中文词组

例如：如果页面有100个中文词组，设置50%比例时，只会翻译其中的50个词组。

## 安装方法

1. 下载项目文件
2. 打开Chrome浏览器，进入扩展管理页面（chrome://extensions/）
3. 开启"开发者模式"
4. 点击"加载已解压的扩展程序"
5. 选择项目文件夹

## 使用方法

### 基本使用
1. 安装扩展后，访问任何包含中文的网页
2. 扩展会自动检测并翻译中文词组
3. 点击扩展图标可以启用/禁用翻译功能

### 配置设置
1. 点击扩展图标，选择"打开设置"
2. 在设置页面可以配置：
   - **目标语言**：英语、日语、韩语、法语、俄语
   - **翻译格式**：方括号、圆括号、冒号
   - **翻译比例**：20%-100%（新功能）
   - **翻译服务**：Google、有道云、阿里云
   - **翻译模式**：顺序翻译或并发翻译

### 翻译比例设置
1. 在设置页面找到"翻译比例"选项
2. 选择合适的比例（如50%）
3. 保存设置并刷新页面
4. 观察翻译效果，验证比例是否符合预期

## 测试页面

项目包含一个测试页面 `html/test.html`，用于验证翻译比例功能：
- 包含多种类型的中文词组
- 可以测试不同比例设置的效果
- 提供详细的测试说明和验证方法

## 技术实现

### 翻译比例算法
```javascript
// 根据翻译比例选择要翻译的token
const ratio = parseInt(config.translationRatio) / 100;
const tokensToTranslate = uniqueTokens.slice(0, Math.ceil(uniqueTokens.length * ratio));
```

### 核心特性
- 优先翻译较长的词组
- 支持翻译缓存，避免重复请求
- 实时配置更新
- 智能跳过已处理的内容

## 文件结构

```
random_translate/
├── manifest.json          # 扩展配置文件
├── scripts/
│   ├── content.js         # 内容脚本（主要翻译逻辑）
│   └── background.js      # 后台脚本
├── popup/
│   ├── popup.html         # 弹窗界面
│   ├── popup.js           # 弹窗脚本
│   ├── options.html       # 设置页面
│   └── options.js         # 设置脚本
├── html/
│   └── test.html          # 测试页面
└── images/                # 图标文件
```

## 更新日志

### v1.0
- 新增翻译比例控制功能
- 支持20%-100%的翻译比例设置
- 优化翻译算法，优先翻译较长词组
- 添加测试页面和详细文档

## 注意事项

1. 翻译比例是基于词组数量计算的，不是字符数
2. 较长的词组会优先被翻译
3. 设置更改后需要刷新页面才能生效
4. 建议在测试页面验证功能效果

## 许可证

MIT License